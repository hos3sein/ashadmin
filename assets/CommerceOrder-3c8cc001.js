import{r as f,u as S,i as I,n as d,j as k,G as L,c as j}from"./index-b8c717f7.js";import{C as g,a as G,b as v,A as P}from"./AppWebsiteVisits-d2eba306.js";import"./BaseOptionChart-d6d1be4e.js";const R=()=>{const[e,b]=f.useState(14),{t:h}=S(),{commerces:c}=I(t=>t.commerce),l=f.useCallback(()=>{//! Inja state haye pending , during va end init mishan be sorate {at : tarikh , value : 0}
let t=[];if(e===7||e===14||e===30){const r=g(e).reverse();for(let o of r){const a={at:o,values:0};t.push(a)}return t}else if(e===180){const r=G(6).reverse();for(let o of r){const a={at:o,values:0};t.push(a)}return t}else if(e===365){const r=v(12).reverse();for(let o of r){const a={at:o,values:0};t.push(a)}return t}},[e]),[D,p]=f.useState(l),[Y,M]=f.useState(l),[T,E]=f.useState(l),w=t=>{//! inja state zamani ke element select baraye date taghir mikone set mishe
b(t.target.value)},y=f.useCallback(()=>{//! inja list tarikh ha ro migirim , be sorate 7 ya 14 roz va ya 6 mahe ya 12 mahe
switch(e){case 7:return g(e).reverse();case 14:return g(e).reverse();case 30:return g(e).reverse();case 180:return v(6).reverse();case 365:return v(12).reverse()}},[e]),x=f.useCallback(()=>{//! Inja state pending , during va end baraye 7 roze ya 14 roz set mishe , yani be sorate rozane
const t=[...l()],r=[...l()],o=[...l()];c==null||c.forEach(a=>{if(a.status===0&&t.forEach((s,i)=>{d(s.updatedAt).format("YYYY/MM/DD")===s.at&&(t[i].values+=1)}),a.statusTime.length){const s=a==null?void 0:a.statusTime[a.statusTime.length-1].status,i=a==null?void 0:a.statusTime[a.statusTime.length-1].at;(s===4||s==5||s===6||s===7||s===8||s===9||s===10)&&r.forEach((n,u)=>{d(i*1).format("YYYY/MM/DD")===n.at&&(r[u].values+=1)}),s===11&&o.forEach((n,u)=>{d(i*1).format("YYYY/MM/DD")===n.at&&(o[u].values+=1)}),(s===1||s===2||s===3)&&t.forEach(({at:n},u)=>{d(a.createdAt).format("YYYY/MM/DD")===n&&(t[u].values+=1)})}}),p(t),M(r),E(o)},[c,l()]),A=f.useCallback(()=>{//! Inja state haye pending , during , end be sorateh mahiane set mishan
const t=[...l()],r=[...l()],o=[...l()];c.forEach(a=>{if((a==null?void 0:a.status)===0&&t.forEach((s,i)=>{d(s.updatedAt).format("YYYY/MM/DD")===s.at&&(t[i].values+=1)}),a.statusTime.length){const s=a==null?void 0:a.statusTime[a.statusTime.length-1].status,i=a==null?void 0:a.statusTime[a.statusTime.length-1].at;(s===5||s===6||s===7||s===8||s===9)&&t.forEach((n,u)=>{n.at.slice(5,7)===d(i*1).format("MM")&&(r[u].values+=1)}),s===10&&t.forEach((n,u)=>{n.at.slice(5,7)===d(i*1).format("MM")&&(o[u].values+=1)}),(s===0||s===1||s===2||s===3||s===4)&&t.forEach((n,u)=>{n.at.slice(5,7)===d(i*1).format("MM")&&(t[u].values+=1)})}}),p(t),M(r),E(o)},[c,l()]);return f.useEffect(()=>{y(),x(),(e===180||e===365)&&A()},[c,e]),k.jsx(L,{item:!0,lg:6,md:6,xs:12,children:k.jsx(P,{sx:{backgroundColor:j.grayBack,color:"black"},title:h("Commerces Orders"),chartLabels:y(),chartData:[{name:h("Completed"),type:"column",fill:"solid",data:T&&T.map(t=>t.values),color:"#8D67D9"},{name:h("Awaiting Price Offer"),type:"area",fill:"gradient",data:D&&D.map(t=>t.values),color:"#D298D5"},{name:h("In progress"),type:"area",fill:"gradient",data:Y&&Y.map(t=>t.values),color:"#AF7FD6"}],onLengthDays:w,lengthDays:e})})};export{R as default};
