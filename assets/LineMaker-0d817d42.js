import{r as d,i as w,u as S,n,j as T,G as L,c as x}from"./index-da9f9318.js";import{C as k,a as j,b as M,A as P}from"./AppWebsiteVisits-9bdcd4e9.js";import"./BaseOptionChart-cdb21334.js";const I=[{user:{_id:"635023c9f2f735a0d380d881",username:"linebase",pictureProfile:"users/8618811111114/profilePicture/8618811111114.jpg"},_id:"6350241d8997ed048fc5fe92",group:"lineMaker",companyName:"lineb",companyAddress:[{address:"浙江省宁波市海曙区段塘街道气象路丽雅苑",nameAddress:"truck company",latitude:29.860297,longitude:121.510849,city:"宁波市",province:"浙江省",district:"海曙区",street:"气象路"}],businessMan:"634d6929b5debf7963b5d1b1",profileCompany:"users/8618811111114/company/profilePicture/8618811111114.jpg",disabledDays:["2022-10-20","2022-10-21","2022-10-22","2022-10-23"],booking:[{driver:{_id:"634d6b39b5debf7963b5d1f2",companyName:"abdik",profileCompany:"users/8618811111113/company/profilePicture/8618811111113.jpg",phone:"8618811111113",transportCapacity:10,truckType:1,truckPlate:"4364444"},_id:"6350246b8997ed048fc5fe99",time:"2023-09-04 08:00",booking:!0,price:49,lineMaker:"635023c9f2f735a0d380d881",end:!1,isActive:!1,invoiceNumber:"mTJ5n28v",createdAt:"2022-10-19T16:23:07.312Z",updatedAt:"2022-10-19T16:56:06.974Z",__v:0,orderId:"6350290e1541bce4100b8d56",where:0},{_id:"6350246b8997ed048fc5fe9c",time:"2023-09-01 08:58",booking:!1,price:49,lineMaker:"635023c9f2f735a0d380d881",end:!0,isActive:!0,invoiceNumber:"TsLlBPbY",createdAt:"2022-10-19T16:23:07.318Z",updatedAt:"2022-10-19T16:23:07.318Z",__v:0},{_id:"6350246b8997ed048fc5ff3e",time:"2023-08-01 21:32",booking:!1,price:49,lineMaker:"635023c9f2f735a0d380d881",end:!0,isActive:!0,invoiceNumber:"VK0x6Eoz",createdAt:"2022-10-19T16:23:07.534Z",updatedAt:"2022-10-19T16:23:07.534Z",__v:0}],createdAt:"2022-10-19T16:21:49.613Z",updatedAt:"2022-10-19T16:23:07.537Z",__v:0},{user:{_id:"63b06acc9f182bda65b87ba1",username:"samline",pictureProfile:"users/8618811111114/profilePicture/8618811111114.jpg"},_id:"63b06b190ffac4cb7b4567fd",group:"lineMaker",companyName:"",companyAddress:[{address:"浙江省宁波市鄞州区百丈街道中山东路294号",nameAddress:"commerce company",latitude:29.869788411458323,longitude:121.5621950954861,city:"宁波市",province:"浙江省",district:"鄞州区",street:"中山东路"}],businessMan:"63b050d087a813088f1667d9",profileCompany:"",disabledDays:[],booking:[{_id:"6350246b8997ed048fc5ff29",time:"2023-09-05 14:46",booking:!1,price:49,lineMaker:"635023c9f2f735a0d380d881",end:!1,isActive:!0,invoiceNumber:"ZkwWIJNY",createdAt:"2022-10-19T16:23:07.510Z",updatedAt:"2022-10-19T16:23:07.510Z",__v:0},{_id:"6350246b8997ed048fc5ff2c",time:"2023-08-26 15:44",booking:!1,price:49,lineMaker:"635023c9f2f735a0d380d881",end:!0,isActive:!0,invoiceNumber:"qMLMV2XK",createdAt:"2022-10-19T16:23:07.513Z",updatedAt:"2022-10-19T16:23:07.513Z",__v:0},{_id:"6350246b8997ed048fc5ff2f",time:"2023-08-23 16:42",booking:!1,price:49,lineMaker:"635023c9f2f735a0d380d881",end:!0,isActive:!0,invoiceNumber:"voUVSU8Z",createdAt:"2022-10-19T16:23:07.516Z",updatedAt:"2022-10-19T16:23:07.516Z",__v:0},{_id:"6350246b8997ed048fc5ff32",time:"2023-09-10 17:40",booking:!1,price:49,lineMaker:"635023c9f2f735a0d380d881",end:!1,isActive:!0,invoiceNumber:"okD5uVTs",createdAt:"2022-10-19T16:23:07.520Z",updatedAt:"2022-10-19T16:23:07.520Z",__v:0},{_id:"6350246b8997ed048fc5ff35",time:"2023-09-01 18:38",booking:!1,price:49,lineMaker:"635023c9f2f735a0d380d881",end:!1,isActive:!0,invoiceNumber:"FcQohOCC",createdAt:"2022-10-19T16:23:07.524Z",updatedAt:"2022-10-19T16:23:07.524Z",__v:0},{_id:"6350246b8997ed048fc5ff3b",time:"2023-09-12 20:34",booking:!1,price:49,lineMaker:"635023c9f2f735a0d380d881",end:!1,isActive:!0,invoiceNumber:"VxS4auwr",createdAt:"2022-10-19T16:23:07.531Z",updatedAt:"2022-10-19T16:23:07.531Z",__v:0}],createdAt:"2022-12-31T17:02:17.685Z",updatedAt:"2022-12-31T17:02:17.685Z",__v:0}],J=()=>{const[s,Z]=d.useState(14),[h,A]=d.useState([]),{linemakers:u}=w(e=>e.linemaker),{t:p}=S(),i=d.useCallback(()=>{//! Inja state haye pending  va end init mishan be sorate {at : tarikh , value : 0}
let e=[];if(s===7||s===14||s===30){const r=k(s).reverse();for(let t of r){const c={at:t,values:0};e.push(c)}return e}else if(s===180){const r=j(6).reverse();for(let t of r){const c={at:t,values:0};e.push(c)}return e}else if(s===365){const r=M(12).reverse();for(let t of r){const c={at:t,values:0};e.push(c)}return e}},[s]),[g,_]=d.useState(i),[Y,y]=d.useState(i),[m,v]=d.useState(i),E=e=>{//! inja state zamani ke element select baraye date taghir mikone set mishe
Z(e.target.value)},D=d.useCallback(()=>{//! inja list tarikh ha ro migirim , be sorate 7 ya 14 roz va ya 6 mahe ya 12 mahe
switch(s){case 7:return k(s).reverse();case 14:return k(s).reverse();case 30:return k(s).reverse();case 180:return M(6).reverse();case 365:return M(12).reverse()}},[s]),C=d.useCallback(()=>{//! Inja state NotBooked , Booked va end baraye 7 roze ya 14 roz set mishe , yani be sorate rozane
const e=[...i()],r=[...i()],t=[...i()],c=u.map(a=>a.booking).flat(),b=n().format("YYYY-MM-DD hh:mm");c.forEach(a=>{n(a.time).isBefore(b,"days")?t.forEach((o,f)=>{n(a.time).format("YYYY/MM/DD")===o.at&&(t[f].values+=1)}):(a.booking&&!a.end&&!a.isActive&&r.forEach((o,f)=>{n(a.time).format("YYYY/MM/DD")===o.at&&(r[f].values+=1)}),!a.booking&&!a.end&&a.isActive&&e.forEach((o,f)=>{n(a.time).format("YYYY/MM/DD")===o.at&&(e[f].values+=1)}))}),_(e),y(r),v(t)},[u,i()]),N=d.useCallback(()=>{//! Inja state haye pending , during , end be sorateh mahiane set mishan
const e=[...i()],r=[...i()],t=[...i()],c=u.map(a=>a.booking).flat(),b=n().format("YYYY-MM-DD hh:mm");c.forEach(a=>{n(a.time).isBefore(b,"days")?t.forEach((o,f)=>{const l=n(a.time).format("YYYY/MM/DD");n(o==null?void 0:o.at).format("MM")===n(l).format("MM")&&(t[f].values+=1)}):(!a.booking&&!a.end&&a.isActive&&e.forEach((o,f)=>{const l=n(a.time).format("YYYY/MM/DD");n(o==null?void 0:o.at).format("MM")===n(l).format("MM")&&(e[f].values+=1)}),a.booking&&!a.end&&!a.isActive&&r.forEach((o,f)=>{const l=n(a.time).format("YYYY/MM/DD");n(o==null?void 0:o.at).format("MM")===n(l).format("MM")&&(r[f].values+=1)}))}),_(e),y(r),v(t)},[u,i()]);d.useEffect(()=>{D(),C(),(s===180||s===365)&&N()},[u,s,h]);const B=d.useCallback(()=>{const e=[...h],r=[...m];I.forEach(t=>{e.push(t.booking)}),A(e.flat()),e.forEach(t=>{var c;if(t.end){const b=(c=t.time)==null?void 0:c.slice(0,10).replaceAll("-","/");r.forEach(a=>{a.at===b&&a.values++})}}),v(r),A(e)},[]);return d.useEffect(()=>{B()},[]),T.jsx(L,{item:!0,lg:6,md:6,xs:12,children:T.jsx(P,{sx:{backgroundColor:x.grayBack,color:"black"},title:p("Linemakers Orders"),chartLabels:D(),chartData:[{name:p("Completed"),type:"column",fill:"solid",data:m&&m.map(e=>e.values),color:"#8D67D9"},{name:p("Booked"),type:"area",fill:"gradient",data:Y&&Y.map(e=>e.values),color:"#D298D5"},{name:p("Not Booked"),type:"area",fill:"gradient",data:g&&g.map(e=>e.values),color:"#AF7FD6"}],onLengthDays:E,lengthDays:s})})};export{J as default};
